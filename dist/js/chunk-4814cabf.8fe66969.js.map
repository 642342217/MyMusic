{"version":3,"sources":["webpack:///./src/components/SongDetail.vue?5772","webpack:///./src/components/Comment.vue?465a","webpack:///src/components/Comment.vue","webpack:///./src/components/Comment.vue?2d5b","webpack:///./src/components/Comment.vue","webpack:///src/components/SongDetail.vue","webpack:///./src/components/SongDetail.vue?dbd2","webpack:///./src/components/SongDetail.vue","webpack:///./src/components/Comment.vue?1a75","webpack:///./src/components/SongDetail.vue?392b"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","_v","_s","on","toSonger","artist","playMusic","class","lyric","showAll","$event","domProps","vetifyStatus","target","composing","inputValue","sendComment","txt_number","warn","number","hotComments","length","_e","_l","comment","key","commentId","beReplied","content","liked","likedCount","user","timeStr","latestComments","success","model","callback","$$v","info","vetifyByCaptcha","helpInfo","staticRenderFns","nickname","contents","iconfont","like","props","methods","component","VAlert"],"mappings":"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","file":"js/chunk-4814cabf.8fe66969.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"song-detail\"},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"pic\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(_vm.picUrl),expression:\"picUrl\"}],attrs:{\"alt\":_vm.name}})]),_c('div',{staticClass:\"song-content\"},[_c('div',{staticClass:\"song-name\"},[_vm._v(_vm._s(_vm.name))]),_c('div',{staticClass:\"song-artist\"},[_vm._v(\"歌手：\"),_c('span',{on:{\"click\":_vm.toSonger}},[_vm._v(_vm._s(_vm.artist))])]),_c('div',{staticClass:\"play\",on:{\"click\":_vm.playMusic}},[_c('i',{staticClass:\"iconfont\"},[_vm._v(\"\")]),_c('span',[_vm._v(\"播放\")])]),_c('div',{class:{ lyric: true, showAll: _vm.showAll }},[_vm._v(_vm._s(_vm.lyric))]),(!_vm.showAll)?_c('div',{staticClass:\"show\",on:{\"click\":function($event){_vm.showAll = !_vm.showAll}}},[_vm._v(\"展开\")]):_c('div',{staticClass:\"show\",on:{\"click\":function($event){_vm.showAll = !_vm.showAll}}},[_vm._v(\"收起\")])])]),_c('div',{staticClass:\"comment\"},[_c('div',{staticClass:\"comment-header\"},[_vm._v(\"评论\")]),_c('div',{staticClass:\"my-comment\"},[_c('div',{staticClass:\"txt\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputValue),expression:\"inputValue\"}],attrs:{\"id\":\"comment\",\"placeholder\":\"评论\"},domProps:{\"value\":(_vm.inputValue)},on:{\"click\":_vm.vetifyStatus,\"input\":function($event){if($event.target.composing){ return; }_vm.inputValue=$event.target.value}}})]),_c('div',{staticClass:\"btn\",on:{\"click\":_vm.sendComment}},[_vm._v(\"评论\")]),_c('div',{class:{ txt_number: true, warn: _vm.number >= 0 ? false : true }},[_vm._v(_vm._s(_vm.number))])]),(_vm.hotComments.length > 0)?_c('div',{staticClass:\"hotComments\"},[_vm._v(\"精彩评论\")]):_vm._e(),_vm._l((_vm.hotComments),function(comment){return _c('Comment',{key:comment.commentId,attrs:{\"beReplied\":comment.beReplied,\"content\":comment.content,\"liked\":comment.liked,\"likedCount\":comment.likedCount,\"user\":comment.user,\"timeStr\":comment.timeStr,\"commentId\":comment.commentId}})}),(_vm.latestComments.length > 0)?_c('div',{staticClass:\"latestComments\"},[_vm._v(\"最新评论\")]):_vm._e(),_vm._l((_vm.latestComments),function(comment){return _c('Comment',{key:comment.commentId,attrs:{\"beReplied\":comment.beReplied,\"content\":comment.content,\"liked\":comment.liked,\"likedCount\":comment.likedCount,\"user\":comment.user,\"timeStr\":comment.timeStr,\"commentId\":comment.commentId}})})],2),_c('v-alert',{attrs:{\"type\":\"success\",\"value\":_vm.success}},[_vm._v(\"发表评论成功！\")]),_c('v-alert',{attrs:{\"type\":\"info\",\"dismissible\":\"\"},model:{value:(_vm.info),callback:function ($$v) {_vm.info=$$v},expression:\"info\"}},[_c('h5',{on:{\"click\":_vm.vetifyByCaptcha}},[_vm._v(_vm._s(_vm.helpInfo))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"comment\"},[_c('div',{staticClass:\"head\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(_vm.user.avatarUrl),expression:\"user.avatarUrl\"}],attrs:{\"alt\":\"头像\"}})]),_c('div',{staticClass:\"bdy\"},[_c('div',{staticClass:\"content-box\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.user.nickname))]),_vm._v(\":\"),_c('span',{staticClass:\"content\"},[_vm._v(_vm._s(_vm.contents))])]),(_vm.beReplied.length)?_c('div',{staticClass:\"replied\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.beReplied[0].user.nickname))]),_vm._v(\":\"),_c('span',{staticClass:\"content\"},[_vm._v(_vm._s(_vm.beReplied[0].content))])]):_vm._e(),_c('div',{staticClass:\"footer\"},[_c('div',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.timeStr))]),_c('div',{staticClass:\"liked-reply\"},[_c('i',{class:{ liked: _vm.liked, iconfont: true },on:{\"click\":_vm.like}},[_vm._v(\"\")]),(_vm.likedCount)?_c('span',{staticClass:\"likedCount\"},[_vm._v(\"(\"+_vm._s(_vm.likedCount)+\")\")]):_vm._e(),_c('span',[_vm._v(\" | \")]),_c('span',{staticClass:\"reply-content\",on:{\"click\":_vm.vetifyStatus}},[_vm._v(\"回复\")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"comment\">\r\n      <div class=\"head\"><img v-lazy=\"user.avatarUrl\" alt=\"头像\"></div>\r\n      <div class=\"bdy\">\r\n        <div class=\"content-box\"><span class=\"name\">{{user.nickname}}</span>:<span class=\"content\">{{contents}}</span></div>\r\n        <div class=\"replied\" v-if=\"beReplied.length\">\r\n          <span class=\"name\">{{beReplied[0].user.nickname}}</span>:<span class=\"content\">{{beReplied[0].content}}</span>\r\n        </div>\r\n        <div class=\"footer\">\r\n          <div class=\"time\">{{timeStr}}</div>\r\n          <div class=\"liked-reply\">\r\n            <i :class=\"{ liked: liked, iconfont: true }\" @click=\"like\">&#xec7f;</i>\r\n            <span class=\"likedCount\" v-if=\"likedCount\">({{likedCount}})</span>\r\n            <span> | </span>\r\n            <span class=\"reply-content\" @click=\"vetifyStatus\">回复</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '../api/index'\r\nexport default {\r\n  props: ['user', 'content', 'beReplied', 'likedCount', 'timeStr', 'liked', 'commentId'],\r\n  methods: {\r\n    async like() {\r\n      let { data } = await api.getLoginStatus();\r\n      if(data.data.account === null) {\r\n          return this.$store.commit('changeShowLoginBox', true);\r\n      }\r\n      if(this.liked) {\r\n        await api.likeCommentOfSong(this.$route.query.id, this.commentId, 0);\r\n        this.$bus.$emit('updateComments', '');\r\n      } else {\r\n        await api.likeCommentOfSong(this.$route.query.id, this.commentId, 1);\r\n        this.$bus.$emit('updateComments', '');\r\n      }\r\n    },\r\n    //查询用户是否已经登录\r\n    async vetifyStatus() {\r\n        let { data } = await api.getLoginStatus();\r\n        if(data.data.account === null) {\r\n            this.$store.commit('changeShowLoginBox', true);\r\n        }\r\n    }\r\n    },\r\n    computed: {\r\n      contents() {\r\n        return this.content.replace('/n', '');\r\n      }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .comment{\r\n    display: flex;\r\n    padding: 16px 0;\r\n    border-bottom: dotted 1px grey;\r\n    .head{\r\n      height: 50px;\r\n      width: 50px;\r\n      img{\r\n        height: 100%;\r\n        width: 100%;\r\n      }\r\n    }\r\n    .bdy{\r\n        width: 50vw;\r\n        padding-left: 10px;\r\n        .content-box{\r\n          \r\n          .name{\r\n            cursor: pointer;\r\n            color: #0c73c2;\r\n          }\r\n          .content{\r\n            white-space: pre-wrap;\r\n          }\r\n        }\r\n        .replied{\r\n            padding: 6px 3px;\r\n            background: #f4f4f4;\r\n            border: 1px solid #dedede;\r\n        }\r\n        .footer{\r\n          display: flex;\r\n          justify-content: space-between;\r\n          margin-top: 6px;\r\n          .time{\r\n            color: #999;\r\n            font-size: small;\r\n          }\r\n          .liked-reply{\r\n            font-size: 15px;\r\n            i{\r\n              cursor: pointer;\r\n              font-size: 18px;\r\n            }\r\n            .liked{\r\n              color: red;\r\n            }\r\n            .reply-content{\r\n              cursor: pointer;\r\n            }\r\n          }\r\n        }\r\n      }\r\n  }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Comment.vue?vue&type=template&id=94f7da5a&scoped=true&\"\nimport script from \"./Comment.vue?vue&type=script&lang=js&\"\nexport * from \"./Comment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Comment.vue?vue&type=style&index=0&id=94f7da5a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"94f7da5a\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"song-detail\">\r\n      <div class=\"header\">\r\n          <div class=\"pic\"><img v-lazy=\"picUrl\" :alt=\"name\"></div>\r\n          <div class=\"song-content\">\r\n              <div class=\"song-name\">{{name}}</div>\r\n              <div class=\"song-artist\">歌手：<span @click=\"toSonger\">{{artist}}</span></div>\r\n              <div class=\"play\" @click=\"playMusic\">\r\n                  <i class=\"iconfont\">&#xe624;</i>\r\n                  <span>播放</span>\r\n              </div>\r\n              <div :class=\"{ lyric: true, showAll: showAll }\">{{lyric}}</div>\r\n              <div v-if=\"!showAll\" class=\"show\" @click=\"showAll = !showAll\">展开</div>\r\n              <div v-else class=\"show\" @click=\"showAll = !showAll\">收起</div>\r\n          </div>\r\n      </div>\r\n      <div class=\"comment\">\r\n            <div class=\"comment-header\">评论</div>\r\n            <div class=\"my-comment\">\r\n                <div class=\"txt\">\r\n                    <textarea id=\"comment\" placeholder=\"评论\" v-model=\"inputValue\" @click=\"vetifyStatus\"></textarea>\r\n                </div>\r\n                <div class=\"btn\" @click=\"sendComment\">评论</div>\r\n                <div :class=\"{ txt_number: true, warn: number >= 0 ? false : true }\">{{number}}</div>\r\n            </div>\r\n            <div class=\"hotComments\" v-if=\"hotComments.length > 0\">精彩评论</div>\r\n            <Comment v-for=\"comment in hotComments\" :key=\"comment.commentId\" :beReplied=\"comment.beReplied\"\r\n            :content=\"comment.content\" :liked=\"comment.liked\" :likedCount=\"comment.likedCount\"\r\n            :user=\"comment.user\" :timeStr=\"comment.timeStr\" :commentId=\"comment.commentId\"></Comment>\r\n            <div class=\"latestComments\" v-if=\"latestComments.length > 0\">最新评论</div>\r\n            <Comment v-for=\"comment in latestComments\" :key=\"comment.commentId\" :beReplied=\"comment.beReplied\"\r\n            :content=\"comment.content\" :liked=\"comment.liked\" :likedCount=\"comment.likedCount\"\r\n            :user=\"comment.user\" :timeStr=\"comment.timeStr\" :commentId=\"comment.commentId\"></Comment>\r\n      </div>\r\n      <v-alert type=\"success\" :value=\"success\">发表评论成功！</v-alert>\r\n      <v-alert type=\"info\" v-model=\"info\" dismissible><h5 @click=\"vetifyByCaptcha\">{{helpInfo}}</h5></v-alert>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '../api/index';\r\nimport Comment from './Comment.vue'\r\nexport default {\r\n    data() {\r\n        return {\r\n            number: 140,//可评论剩余字数\r\n            inputValue: '',//评论\r\n            id: '',//歌手ID\r\n            songId: '',\r\n            name: '',\r\n            picUrl: '',\r\n            artist: '',\r\n            lyric: '',\r\n            showAll: false,\r\n            songUrl: '',\r\n            latestComments: [],//最新评论\r\n            hotComments: [],//热门评论\r\n            success: false,//发布成功消息提示框\r\n            info: false,//发布失败消息提示框\r\n            helpInfo: '',//提示信息\r\n        }\r\n    },\r\n    methods: {\r\n        //获取歌曲详情：歌名，歌曲图片，作者\r\n        async getSongDetail() {\r\n            let { data } = await api.getDetailOfSong(this.$route.query.id);\r\n            this.id = data.songs[0].ar[0].id;\r\n            this.songId = data.songs[0].id;\r\n            this.name = data.songs[0].name;\r\n            this.picUrl = data.songs[0].al.picUrl;       \r\n            this.artist = data.songs[0].ar[0].name;  \r\n        },\r\n        //获取歌词\r\n        async getLyric() {\r\n            let { data } = await api.getLyric(this.$route.query.id);\r\n            this.lyric = data.lrc.lyric;\r\n            let re = /\\[[0-9]*:[0-9]*\\.[0-9]*\\]/g;\r\n            this.lyric = this.lyric.replace(re, '');\r\n        },\r\n        //跳转至歌手界面\r\n        toSonger() {\r\n            this.$router.push({ path: 'artist', query: { id: this.id }});\r\n        },\r\n        //播放音乐\r\n        async playMusic() {\r\n            let { data } = await api.getSongUrl(this.songId);\r\n            this.songUrl = data.data[0].url;\r\n            this.$store.commit('playSong', this.songUrl);\r\n        },\r\n        //发表评论\r\n        sendComment() {\r\n            let data = api.sendCommentOfSong(this.songId, this.inputValue);\r\n            data.then(value => {\r\n                if(value.data.code === 200) {\r\n                    this.inputValue = '';\r\n                    this.success = true;\r\n                    setTimeout(() => {\r\n                        this.success = false;\r\n                    }, 1000);\r\n                } else {\r\n                    this.helpInfo = value.data.data.dialog.subtitle;\r\n                    this.info = true;\r\n                }\r\n                \r\n            }, reason => {\r\n                console.error(reason);\r\n            })\r\n        },\r\n        //获取评论（最新评论+热门评论）\r\n        async getComments() {\r\n            let { data } = await api.getCommentOfSong(this.$route.query.id);\r\n            this.latestComments = data.comments;\r\n            this.hotComments = data.hotComments;\r\n        },\r\n        //短信验证\r\n        vetifyByCaptcha() {\r\n            this.$bus.$emit('vetifyByCaptcha', '');\r\n            this.info = false;\r\n        },\r\n        //查询用户是否已经登录\r\n        async vetifyStatus() {\r\n            let { data } = await api.getLoginStatus();\r\n            if(data.data.account === null) {\r\n                this.$store.commit('changeShowLoginBox', true);\r\n            }\r\n        }\r\n    },\r\n    watch: {\r\n        //监听当前最新输入框的值，修改剩余最大字数\r\n        inputValue(newValue) {\r\n            this.number = 140 - newValue.length;\r\n        }\r\n    },\r\n    created() {\r\n        this.getSongDetail();\r\n        this.getLyric();\r\n        this.getComments();\r\n    },\r\n    mounted() {\r\n        this.$bus.$on('updateComments', () => {\r\n            this.getComments();\r\n        });\r\n    },\r\n    beforeDestroy() {\r\n        this.$bus.$off('updateComments');\r\n    },\r\n    components: { Comment }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    .song-detail{\r\n        .v-alert{\r\n            position: fixed;\r\n            top: 50%;\r\n            left: 50%;\r\n            transform: translateX(-50%) translateY(-50%);\r\n            h5{\r\n                cursor: pointer;\r\n                &:hover{\r\n                    text-decoration: underline;\r\n                }\r\n            }\r\n        }\r\n        margin: 0 auto;\r\n        width: 64vw;\r\n        border-left: solid #d3d3d3 1px;\r\n        border-right: solid #d3d3d3 1px;\r\n        .header{\r\n            display: flex;\r\n            width: 60vw;\r\n            margin: 0 auto;\r\n            .pic{\r\n                width: 18vw;\r\n                height: 18vw;\r\n                padding: 15px 15px;\r\n                img{\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    border-radius: 100%;\r\n                }\r\n            }\r\n            .song-content{\r\n                display: flex;\r\n                flex-direction: column;\r\n                flex: 1;\r\n                padding: 15px 0 0 30px;\r\n                .song-name{\r\n                    font-size: 28px;\r\n                }\r\n                .song-artist{\r\n                    padding: 10px 0;\r\n                    font-size: 15px;\r\n                    span{\r\n                        color: #0c73c2;\r\n                        cursor: pointer;\r\n                    }\r\n                }\r\n                .play{\r\n                    width: 100px;\r\n                    height: 30px;\r\n                    background-color: #0c73c2;\r\n                    color: white;\r\n                    cursor: pointer;\r\n                    i{\r\n                        line-height: 30px;\r\n                        padding: 0 10px;\r\n                    }\r\n                    span{\r\n                        padding-left: 8px;\r\n                    }\r\n                }\r\n                .lyric{\r\n                    padding: 10px 0;\r\n                    font-size: small;\r\n                    white-space: pre-wrap;\r\n                    height: 301px;\r\n                    overflow: hidden;\r\n                }\r\n                .showAll{\r\n                    height: auto;\r\n                }\r\n                .show{\r\n                    color: #0c73c2;\r\n                    cursor: pointer;\r\n                }\r\n            }\r\n        }\r\n        .comment{\r\n            width: 60vw;\r\n            margin: 20px auto 0;\r\n            .comment-header{\r\n                height: 40px;\r\n                line-height: 40px;\r\n                font-size: 20px;\r\n                border-bottom: solid red 2px;\r\n            }\r\n            .my-comment{\r\n                margin-top: 10px;\r\n                .txt{\r\n                    height: 100px;\r\n                    width: 60vw;\r\n                    border: solid 1px #d3d3d3;\r\n                    #comment{\r\n                        resize: none;\r\n                        outline: none;\r\n                        width: 100%;\r\n                        height: 100px;\r\n                        overflow: auto;\r\n                    }\r\n                }\r\n                .btn{   \r\n                    float: right;\r\n                    margin-top: 5px;\r\n                    border-radius: 5px;\r\n                    cursor: pointer;\r\n                    text-align: center;\r\n                    line-height: 28px;\r\n                    width: 50px;\r\n                    height: 28px;\r\n                    background-color: #0c73c2;\r\n                    color: white;\r\n                }\r\n                .txt_number{\r\n                    float: right;\r\n                    height: 28px;\r\n                    line-height: 28px;\r\n                    margin-top: 6px;\r\n                    margin-right: 10px;\r\n                }\r\n                .warn{\r\n                    color: red;\r\n                }\r\n            }\r\n            .latestComments,\r\n            .hotComments{\r\n                margin-top: 50px;\r\n                border-bottom: solid 2px red;\r\n                padding-bottom: 6px;\r\n            }\r\n        }\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SongDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SongDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SongDetail.vue?vue&type=template&id=b9222d34&scoped=true&\"\nimport script from \"./SongDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./SongDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SongDetail.vue?vue&type=style&index=0&id=b9222d34&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b9222d34\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib/components/VAlert';\ninstallComponents(component, {VAlert})\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=style&index=0&id=94f7da5a&lang=less&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SongDetail.vue?vue&type=style&index=0&id=b9222d34&lang=less&scoped=true&\""],"sourceRoot":""}